---
import type { Gallery } from '@lib/sanity/types';
import DefaultLayout from '../../layouts/DefaultLayout.astro';
import { sanityClient } from 'sanity:client';
import groq from 'groq';
import GalleryGrid from '@components/GalleryGrid.astro';

const galleries = await sanityClient.fetch<Gallery[]>(groq`*[_type == "gallery"] {
      ...,
      images[][0...3] {
        ...,
         asset->
        }
      }`);
---

<DefaultLayout title="Gallery">
  {
    galleries?.map((gallery) => {
      return (
        <section class="container mt-12 md:mt-24">
          <div class="space-content">
            <h2>{gallery.title}</h2>
            <h3>{gallery.headline}</h3>
            <p>{gallery.description}</p>
          </div>
          <div class=" mt-12 md:mt-24">
            <GalleryGrid images={gallery.images} galleryName={gallery.slug.current} preview />
          </div>
        </section>
      );
    })
  }
</DefaultLayout>
